%h1= @title = 'Listing Movies'

- if @movies.size > 0
  = render :partial => "search"
  = link_to 'New movie', new_movie_path
  = will_paginate @movies
  %table
    %thead
      %tr
        %th
        %th
          = sortable_link 'Title', :column => 'title'
        %th
          = sortable_link 'Genre', :column => 'genre'
        %th
          = sortable_link 'Format', :column => 'format'
        %th 
        %th 
        %th 
    %tbody
      - @movies.each do |movie|
        %tr{:class => cycle('odd', 'even')}
          %td.thumbnail= link_to(image_tag(thumbnail(movie), :title => movie.title), movie_path(movie))
          %td= h movie.title
          %td= h movie.genre.name unless movie.genre.nil?
          %td= h movie.format
          %td= link_to 'Edit', edit_movie_path(movie)
          %td= link_to 'Delete', movie, :confirm => 'Are you sure?', :method => :delete
  %br
  = will_paginate @movies
  %b= "#{@movies.total_entries} total movies"
- else
  %p
    You don't have any movies.
    =link_to 'Add some', new_movie_path
